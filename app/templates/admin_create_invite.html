{% extends "layout_admin.html" %}
{% block title %}Einladung erstellen{% endblock %}

{% block admin_content %}
<h1 class="text-3xl font-bold mb-6">{% if invite %}Einladung bearbeiten{% else %}Neue Einladung erstellen{% endif %}</h1>

{% if vereins_name %}
<div class="mb-8">
  <h2 class="text-2xl font-bold text-blue-700">{{ vereins_name }}</h2>
</div>
{% endif %}

<!-- Formular für Einladung -->
<div class="bg-white p-6 rounded shadow">
  <form
    method="POST"
    action="{{ url_for('admin.create_invite', invite_id=invite.id if invite else None) }}"
  >
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
    <div class="space-y-4">
      <div>
        <label for="verein" class="block font-semibold mb-2">Name des Vereins/Gasts</label>
        <input
          type="text"
          id="verein"
          name="verein"
          placeholder="Name des Vereins/Gasts"
          value="{{ invite.verein if invite else '' }}"
          required
          class="p-3 border rounded w-full"
        />
      </div>
      
      <div>
        <label for="token" class="block font-semibold mb-2">Token (optional)</label>
        <input
          type="text"
          id="token"
          name="token"
          placeholder="Token (8 Zeichen)"
          value="{{ invite.token if invite else '' }}"
          class="p-3 border rounded w-full"
          maxlength="8"
          pattern="[a-z0-9]{8}"
          title="Token muss genau 8 Zeichen lang sein (nur kleinbuchstaben und zahlen)"
        />
        <p class="mt-1 text-sm text-gray-600">Wenn leer, wird automatisch ein Token generiert.</p>
      </div>
    </div>
    
    <div class="mt-8 flex justify-end gap-3">
      <a href="{{ url_for('admin.index') }}" 
         class="bg-gray-500 hover:bg-gray-600 text-white py-2 px-4 rounded">
        Abbrechen
      </a>
      <button
        type="submit"
        class="bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700"
      >
        {% if invite %}Änderungen speichern{% else %}Einladung erstellen{% endif %}
      </button>
    </div>
  </form>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Optional: Autofocus auf das erste Eingabefeld
    document.getElementById('verein').focus();
  });
</script>
{% endblock %}